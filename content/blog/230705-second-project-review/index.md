---
title: 두 번째 프로젝트 회고
date: "2023-07-10T22:12:00.000Z"
description: 두 번째 프로젝트를 마치며 느낀 4가지
category: essay
---

## 1. pinia와 typescript의 도입

이번 프로젝트(커머스)에서 드디어 벼르고 벼르어왔던 기술을 도입하게 되었다. 바로 `typescript`와 `pinia`이다.

원래는 더 빨리 도입하고 싶었으나, 이전 프로젝트가 생각보다 늘어짐 + 숙련도 이슈로 인하여 늦어진 감이 있다. 하지만 그만큼 더 철저하게 준비해서 도입 안하느니만 못한 상황이 벌어지지 않게끔 신경썼다. 여기서 '도입 안하느니만 못한 상황'이란 기껏 타입스크립트 도입해놓고 모든 타입을 `any`로 정의한다든가, 에러 해결을 못해서 `js`로 회귀한다든가 하는 상황이다. 도입 초반부에는 이런 일이 실제로 벌어질 위기가 몇 번 있었으나, 그때마다 구글링하고 공식문서 열심히 읽다보니 어찌어찌 해결은 할 수 있었다.

도입해놓고 나서 느낀 점은 확실히 타입스크립트가 개발경험을 엄청나게 개선시켜준다. VScode에서 제공해주는 자동완성 기능을 맛보면 헤어나올 수가 없다. 특히나 내가 진행한 커머스는 그 특성상 프론트에서 다뤄야할 데이터가 많다. 하나의 상품 데이터 하나에도 그 속성이 20개가 넘고, 이 상품을 주문 로직을 태우려면 또 다시 주문을 위한 데이터 20여개가 추가된다.

기존 `js`로 개발을 했다면 40개가 넘는 데이터 중에서 하나라도 오타가 나거나 타입이 어긋나면 직접 시연해보며 그 에러를 찾는데 시간이 잡아먹혔겠지만, `ts`를 사용함으로써 런타임 이전 시점에 어디서 문제가 생기는지 쉽게 찾을 수 있게 되었다.  
왜 사람들이 `ts`를 제대로 쓸 줄 알기 시작하면 쓰기 이전으로 돌아갈 수 없다고 말하는지 깨달았다. 아직 내가 '제대로 쓴다'라고 말하기엔 어설프긴 하다만, `ts`학습 허들의 고비점은 넘긴 느낌이다.

또 다른 기술 도입은 `pinia`이다. `pinia`는 vue 커뮤니티에서 출시한 `vuex`를 대신할 새로운 전역 상태관리 라이브러리이다. 사실 `vuex`를 대신한다고는 해도, 그 개발진 대부분이 옮겨간 수준이라 크게 달라진 점은 없다.  
기존 `vuex`를 사용하면서 느꼈던 불편한 점들, 그리고 `ts`와의 호환성 증대로 인하여 서로의 시너지를 극대화시킬 수 있다는 장점이 있다.

`pinia`에 대한 도입기는 [이전 포스팅](https://juheon.dev/vue/230704-start-pinia/)에 자세히 적어놓았다.

## 2. 페이지 / 컴포넌트 구조에 대한 고민

개발을 시작한지 얼마 되지 않은 초창기의 개발 스타일은 가급적이면 한 페이지에 내에 많은 기능을 압축적으로 집어넣으려고 했다. 개발이 익숙하지 않을 시기에는 파일을 여러 개로 쪼개는 것에 대한 부담감(두려움)도 있고, 상대적으로 규모가 작은 프로젝트를 맡았었기에 '페이지/컴포넌트 구조론'에 대해 고민이 많지는 않았다.  
하지만 프로젝트의 규모가 점점 커질수록 페이지,컴포넌트의 개수가 많아지게 되고, 여러 파일을 다루는 일도 익숙해지면 자연스레 이 파일들을 어떤 기준으로 나눠야 효율적일지 고민하게 된다.

일단 **페이지**란 사용자가 서비스에서 제공하는 특정한 기능 **한 가지**를 수행하기 위해 만들어진다. 커머스 서비스로 예를 들자면 상품 전시, 결제, 장바구니, 주문조회와 같은 기능에는 모두 고유한 페이지가 존재한다. 그리고 페이지는 각자마다 고유한 `path(url)`를 부여받는다. 이 `path`가 사용자와 개발자간의 접점이 되어서 상호작용이 가능한 것이다.

**컴포넌트**는 그 페이지를 구성하고 있는 일종의 부속품이다. 컴포넌트에는 버튼이나 헤더,푸터, input창 하나하나도 개발자의 판단에 따라서 컴포넌트가 될 수도 있다. 컴포넌트를 분리하는 기준은 저마다 다를 수 있지만 나같은 경우에는 프로젝트 내에서 반복적으로 사용되는 여부와 기능을 구성하는 최소한의 단위를 따져서 만들게 된다.  
즉 하나의 페이지 안에도 수십개의 컴포넌트가 존재할 수 있고, 이 말은 곧 작은 기능을 담당하는 부품(컴포넌트)이 여러개가 합쳐짐에 따라 기능을 수행할 수 있게 되는 것이다.

그래서 내가 페이지를 나누는 기준은 사용자의 행동 단위를 큼직하게 잘라서 구성하는데, 이 기준이 칼로 두부자르듯이 항상 말끔하게 구분되지는 않는다. 때로는 특정 행동에서 파생된 기능을 다뤄야 할 때가 있다.
예를 들어 '주문조회' 페이지에서 '배송조회'라는 파생기능이나, '상품 주문'페이지에서 '주소 검색'같은 기능들이다. 이러한 파생기능을 구현하려면 결국 선택을 해야 한다.

#### 1. 메인 페이지에 녹여내기

2가지의 별도의 행동을 하나의 페이지 안에 모두 보여주기에는 부담이 있다. 위에서 언급한 **페이지**의 정의와 같이 하나의 페이지 안에서는 **한 가지**기능만 수행하도록 해야한다. 파생된 기능을 욱여넣음으로써 그 페이지만의 맥락이 모호해지게 만들고 싶지는 않다.

#### 2. 별도의 페이지(`path`)로 만들기

1번의 방법이 싫다면 페이지 자체를 분리하면 된다. 하지만 페이지를 남발하게 되면 그 만큼 `path`의 수가 많아지게 된다. 한 페이지 내에서 파생 기능이 10가지라면 새로운 `path` 10가지가 추가된다는 뜻인데 과연 이게 효율적인 방법인지는 고민해봐야 한다.  
무엇보다 페이지를 쪼개면 메인 페이지 => 파생 페이지 로 데이터를 전달하기가 난처해진다. 페이지 => 컴포넌트 구조에서는 `props`를 통해 전달할 수 있지만, 페이지 => 페이지 구조에서는 `props`전달이 불가능하다. 따라서 상태관리의 힘을 빌린다거나, 파생 페이지에서 다시 새로운 데이터를 `fetch`해야하는 비효율적인 문제가 발생한다.

결국 방법 1,2 중 완벽한 방법은 없다. 우리는 하나의 페이지라는 제한적인 공간(맥락)안에서도 여러가지 파생된 기능을 넣고 싶어한다. 이를 만족할 수 있는 방법은 바로 **모달**이다.  
모달은 별도의 `path`를 부여하지 않더라도 공간을 분리시킬 수 있다. 평소에는 메인페이지를 보여주고 있다가 사용자가 파생 기능을 선택했을 때에만 모달이 기존 화면을 덮음으로써 공간은 분리할 수 있다.

그래서 결론을 얘기하자면 이번 프로젝트에서는 모달을 적극적으로 사용하였다. 모달은 '페이지와 컴포넌트 사이 고민'의 산물이다. 나는 페이지는 가능한 적게 만들면서 컴포넌트는 최대한 쪼갤 수 있을만큼 쪼개는 방식을 선호하다보니 이런 고민을 하게 된 것 같다.

## 3. 셀프 코드리뷰(클린 코드)

셀프 코드리뷰라는 말이 좀 우스울 수 있다. 하지만 회사에 프론트 개발자가 나 혼자밖에 없으니 누군가에게 코드 리뷰를 부탁하기 어려운 상황이다. 그래서 나는 회사에 다니는 동안 '좋은 코드'란 무엇일까에 대해 고민을 많이 할 수밖에 없었다. 그래서 내가 생각한 '좋은 코드'의 정의 3가지는,

> 1. 몇년 뒤에 다른 사람이 읽어도 자연스럽게 읽혀지는 코드

지금 코드를 짜고 있는 내 입장에서는 당연히 코드가 잘 읽힌다.  
 왜냐하면 1. 내가 짰고 2. 방금 짰고 3. 코드를 작성해온 컨텍스트 가 있기 때문이다. 반대로 얘기하면, 위 3가지가 없으면 이 코드는 이해할 수 없는 코드가 되어버린다. 즉 '다른 사람이 오래전에 짜놓고 컨텍스트를 모르는 코드'가 이에 해당된다.

> 2. 버그가 발생했을 때, 어느 부분을 고쳐야 하는지 직관적으로 찾을 수 있는 코드

버그가 발생하지 않는 방향으로 코드를 작성하는 게 가장 바람직하겠지만, 신이 아니라면 코드를 작성하다 보면 버그 발생은 불가피하다. 버그가 발생하지 않도록 하는 일만큼 중요한 게 '버그를 얼마나 쉽게 고칠 수 있느냐'이다.

대개 해결하기 어려운 버그들의 공통점은 하나의 코드 안에서 여러 로직들이 이어폰줄처럼 엉켜있을 때 발생한다. 어떤 부분을 고치면, 이곳에 의존하고 있던 또 다른 함수에게 사이드이펙트가 전파될 수도 있다.

> 3. 한 번에 한 가지만 신경쓰는 코드

세 번째 정의가 어쩌면 첫 번째, 두 번째 정의를 만족시키기 위한 대전제일 수 있다.

일단 코드를 작성하기 전에, 내가 생각하는 가장 이상적인 형태의 코드를 미리 머릿속에 떠올려본다.

## 4. 효율적인 업무 방식

마지막은 개발 외적인 이야기이다. [첫 번재 프로젝트 회고](https://juheon.dev/230625-project-review/)에서도 언급했다시피 프로젝트에서 가장 어려운 문제는 개발이 아니라 사람과 사람간의 소통의 문제인 경우가 더 많다. 그래서 이번 프로젝트에서는 내가 선제적으로 어떻게해야 조금 더 효율적으로 일할 수 있을 지에 대해서 먼저 고민해보았다.

첫 번째는 기획자와의 소통이다.  
내가기획자에게 가장 많이 물어본 질문은 아마 '나중에 이 기능이 추가될 수도 있나요?'

두 번째는 디자이너와의 소통이다.

세 번째는 백엔드 개발자와의 소통이다.
